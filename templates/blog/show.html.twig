{% extends 'base.html.twig' %}

{% block title %}Blog{% endblock %}
{% block content %}

    <h1>{{ blog.title }}</h1>
	{% if ((is_granted("EDIT", blog)) or (is_granted("ROLE_ADMIN"))) %}
		<a href="{{ path('blog_edit', {'id': blog.id}) }}">edit</a>	<a href="{{ path('blog_index') }}">back to list</a>
	{% endif %}
	<hr>
    <div>
		{{ blog.article | raw }}
	</div>
	<hr>

	author: {{ blog.user }} ({{ blog.createdAt | date('d-m-Y H:i') }})


    {% if ((is_granted("ROLE_ADMIN")) or (is_granted("EDIT", blog))) %}
    	{{ include('blog/_delete_form.html.twig') }}
    {% endif %}
	<hr>
	<h4>comments</h4>
    {% if app.user %}
		<br><a href = "{{ path('blog_comment_new', {'blog_id': blog.id}) }}">add comment</a>
	{% endif %}
	<hr>
    {% for comment in comments %}
		{{ comment.Comment }} <br>
		author: {{ comment.User.username }} ({{ comment.createdAt | date('d-m-Y H:i') }})
        {% if ((is_granted("EDIT", comment)) or (is_granted("ROLE_ADMIN"))) %}
			<a href = "{{ path('blog_comment_edit', {id: comment.id}) }}">Edit</a>
			<a href = "{{ path('blog_comment_delete', {id: comment.id}) }}">Delete</a>
		{% endif %}
		<hr width="30%">
	{% endfor %}

{% endblock %}
